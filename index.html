<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CircuiTikZ Visual Editor</title>
    <link rel="stylesheet" href="index.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
</head>

<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <h1 class="logo">
                    <span class="logo-icon">âš¡</span>
                    CircuiTikZ Editor
                </h1>
            </div>
            <div class="header-center">
                <div class="toolbar">
                    <button class="tool-btn" id="selectTool" title="Select (V)">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z" />
                        </svg>
                    </button>
                    <button class="tool-btn" id="wireTool" title="Wire (W)">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M4 12h16" />
                            <circle cx="4" cy="12" r="2" />
                            <circle cx="20" cy="12" r="2" />
                        </svg>
                    </button>
                    <div class="toolbar-separator"></div>
                    <button class="tool-btn" id="undoBtn" title="Undo (Ctrl+Z)">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M3 7v6h6" />
                            <path d="M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13" />
                        </svg>
                    </button>
                    <button class="tool-btn" id="redoBtn" title="Redo (Ctrl+Y)">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M21 7v6h-6" />
                            <path d="M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3L21 13" />
                        </svg>
                    </button>
                    <div class="toolbar-separator"></div>
                    <button class="tool-btn" id="copyBtn" title="Copy (Ctrl+C)">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
                        </svg>
                    </button>
                    <button class="tool-btn" id="cutBtn" title="Cut (Ctrl+X)">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <circle cx="6" cy="6" r="3" />
                            <circle cx="6" cy="18" r="3" />
                            <line x1="20" y1="4" x2="8.12" y2="15.88" />
                            <line x1="14.47" y1="14.48" x2="20" y2="20" />
                            <line x1="8.12" y1="8.12" x2="12" y2="12" />
                        </svg>
                    </button>
                    <button class="tool-btn" id="pasteBtn" title="Paste (Ctrl+V)">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2" />
                            <rect x="8" y="2" width="8" height="4" rx="1" ry="1" />
                        </svg>
                    </button>
                    <div class="toolbar-separator"></div>
                    <button class="tool-btn" id="rotateLeftBtn" title="Rotate Left (Q)">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M2.5 2v6h6M2.66 15.57a10 10 0 1 0 .57-8.38" />
                        </svg>
                    </button>
                    <button class="tool-btn" id="rotateRightBtn" title="Rotate Right (E)">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M21.5 2v6h-6M21.34 15.57a10 10 0 1 1-.57-8.38" />
                        </svg>
                    </button>
                    <button class="tool-btn danger" id="deleteBtn" title="Delete (Del)">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path
                                d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
                        </svg>
                    </button>
                    <div class="toolbar-separator"></div>
                    <button class="tool-btn" id="fitViewBtn" title="Fit View to Circuit">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0z" />
                            <path d="M3 7V5a2 2 0 0 1 2-2h2" />
                            <path d="M17 3h2a2 2 0 0 1 2 2v2" />
                            <path d="M21 17v2a2 2 0 0 1-2 2h-2" />
                            <path d="M7 21H5a2 2 0 0 1-2-2v-2" />
                        </svg>
                    </button>
                    <button class="tool-btn" id="centerOriginBtn" title="Center Circuit at Origin">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M12 2v20M2 12h20" />
                            <circle cx="12" cy="12" r="3" />
                        </svg>
                    </button>
                </div>
            </div>
            <div class="header-right">
                <div class="grid-control">
                    <label for="gridSize">Grid:</label>
                    <select id="gridSize">
                        <option value="10">10px</option>
                        <option value="20" selected>20px</option>
                        <option value="30">30px</option>
                        <option value="40">40px</option>
                        <option value="50">50px</option>
                    </select>
                </div>
                <button class="btn btn-secondary" id="clearBtn">Clear All</button>
                <button class="btn btn-secondary" id="testAllBtn" title="Place all components for testing">Test
                    All</button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Component Library Sidebar -->
            <aside class="sidebar component-library">
                <div class="sidebar-header">
                    <h2>Components</h2>
                    <input type="text" id="componentSearch" placeholder="Search..." class="search-input">
                </div>
                <div class="component-categories" id="componentCategories">
                    <!-- Categories will be populated by JavaScript -->
                </div>
            </aside>

            <!-- Canvas Area -->
            <div class="canvas-container">
                <div class="canvas-wrapper" id="canvasWrapper">
                    <canvas id="gridCanvas"></canvas>
                    <canvas id="mainCanvas"></canvas>
                    <div class="canvas-overlay" id="canvasOverlay"></div>
                </div>
                <div class="canvas-info">
                    <span id="mouseCoords">X: 0, Y: 0</span>
                    <div class="zoom-control">
                        <label for="zoomSelect">Zoom:</label>
                        <select id="zoomSelect" class="zoom-select">
                            <option value="0.5">50%</option>
                            <option value="0.75">75%</option>
                            <option value="1" selected>100%</option>
                            <option value="1.5">150%</option>
                            <option value="2">200%</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Properties Panel -->
            <aside class="sidebar properties-panel">
                <div class="sidebar-header">
                    <h2>Properties</h2>
                </div>
                <div class="properties-content" id="propertiesContent">
                    <div class="no-selection">
                        <p>Select a component to edit its properties</p>
                    </div>
                </div>
            </aside>
        </main>

        <!-- Code Output Panel -->
        <footer class="code-panel">
            <div class="code-header">
                <h3>Generated CircuiTikZ Code</h3>
                <div class="code-actions">
                    <button class="btn btn-icon" id="copyCodeBtn" title="Copy to Clipboard">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
                        </svg>
                        Copy
                    </button>
                    <button class="btn btn-icon" id="toggleCodeBtn" title="Toggle Code Panel">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M6 9l6 6 6-6" />
                        </svg>
                    </button>
                </div>
            </div>
            <div class="code-content">
                <pre id="codeOutput"><code>\begin{circuitikz}[american]
  % Add components to the canvas to generate code
\end{circuitikz}</code></pre>
            </div>
        </footer>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <!-- Scripts -->
    <script src="components.js"></script>
    <script src="app.js"></script>
</body>

</html>